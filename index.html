<!doctype html>
<html lang = "ru">
    <head> 
        <meta charset= "UTF-8" />
        <meta name="viewport"
              content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie-edge" />
        <script src="https://telegram.org/js/telegram-web-app.js"></script>
        <link rel="stylesheet" href="./style.css" />
        <title>Shop</title>
    </head>
    <body>
         <div id="main">
            <h1>Оформление покупки</h1>
            <p>Хотите купить игру?</p>
            <button id="buy" class="button">Купить</buttom>
         </div>
         <form id="form">
            <input type="text" placeholder="Имя" id="name" required>
            <input type="email" placeholder="e-mail" id="email" required>
            <input type="text" placeholder="Номер телефона" id="phone" required>
            <button id="order" class="button">Оформить</buttom> 
         </form>

         <script src="https://telegram.org/js/telegram-web-app.js"></script>
         <script>
             let tg= window.Telegram.WebApp;
             let buy= document.getElementById("buy")
             let order= document.getElementById("order")
    
             
             buy.addEventListener("click", () => {
                 document.getElementById("main").style.display = "none";
                 document.getElementById("form").style.display = "block";
                 document.getElementById("name").value = tg.initDataUnsafe.user.first_name + " " + tg.initDataUnsafe.user.last_name;
                 tg.expand();
             });
             
             order.addEventListener("click", ()=> {
                 let data= {
                     name: document.getElementById("name").value,
                     email: document.getElementById("email").value,
                     number: document.getElementById("phone").value,
                 }
                 tg.sendData(JSON.stringify(data));
                 tg.close();
             });
         </script>
     </body>

</html>
